# governor - 用于调节数据流动的库

这个库是Rust程序中用于速率限制，它使用通用单元速率算法实现。

它的目的是帮助你的程序了解它应该给外部服务带来多大的压力，并且，在某种程度上，允许你的服务调节它们从用户那里承担的压力。在某种程度上，它的功能就像标志性的蒸汽调速器，这个库的名字就来自于它：

该crate中的速率限制算法使用通用单元速率算法(GCRA)实现。GCRA在功能上等同于漏桶算法，但与大多数漏桶算法实现相比有一些优势：

不需要后台“滴”过程来保持对桶的维护

每当有请求进入时，它都会以纳秒级持续更新状态。

它将其状态保存在单个AtomicU64整数中


这里使用的速率限制状态不占用太多内存(只有64位!)，并且通过compare-and-swap操作在线程安全的情况下更新。与使用互斥锁的ratelimit_meter实现相比，它在多线程中使用时平均快10倍。